# Add OSDW method
into scope label \ code_regex Name\s\(MSOS,\sZero\) insert
begin
Method (OSDW, 0, NotSerialized)
\n{\n
\nIf (CondRefOf (_OSI, Local0))
\n{
\n\tIf (_OSI ("Darwin"))
\n\t{
\n\t\tReturn (One)
\n\t}
\n\tElse
\n\t{
\n\t\tReturn (Zero)
\n\t}
\n}
\nElse
\n{
\n\tReturn (Zero)
\n}
\n}
end;

# Add usefull registers to LPC
into scope code_regex NSCA insert
begin
OperationRegion(LPCD, PCI_Config, 0x80, 0x2)\n
Field(LPCD, AnyAcc, NoLock, Preserve) {\n
    COMA,   3,\n
        ,   1,\n
    COMB,   3,\n

    Offset(0x01),\n
    LPTD,   2,\n
        ,   2,\n
    FDCD,   2\n
}\n
OperationRegion(LPCE, PCI_Config, 0x82, 0x2)\n
Field(LPCE, AnyAcc, NoLock, Preserve) {\n
    CAEN,   1,\n
    CBEN,   1,\n
    LPEN,   1,\n
    FDEN,   1\n
}\n
end;

# Disable Floppy Drive
into method label _STA parent_label FDC code_regex If\s\(GCFD\s\(\)\) replaceall_matched
begin
If (LAnd(GCFD (), LNot(OSDW())))
end;

# Disable Speaker
into device label SPK insert
begin
Method (_STA, 0, NotSerialized)
\n{
\nIf (OSDW())
\n{
\n\tReturn(Zero)
\n}
\nElse
\n{
\n\tReturn(0x0F)
\n}
\n}
end;

# Disable PS/2 Mouse
into method label _STA parent_label MOU code_regex If\s\(GCON\s\(\)\) replaceall_matched
begin
If (LAnd(GCON (), LNot(OSDW())))
end;

# Disable ECP Parallel Port
into method label _STA parent_label PRT code_regex If\s\(GCPP\s\(\)\) replaceall_matched
begin
If (LAnd(GCPP (), LNot(OSDW())))
end;